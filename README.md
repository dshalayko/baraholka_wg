# WG Black Market Bot

Этот репозиторий содержит телеграм‑бота, который помогает пользователям публиковать объявления в приватный канал и управлять ими.

## Основные компоненты

- **main.py** – точка входа. Настраивает `ApplicationBuilder`, регистрирует обработчики и запускает поллинг.
- **announcements.py** – логика создания, редактирования и публикации объявлений. Содержит функции для загрузки фотографий, предварительного просмотра и отправки объявлений в канал.
- **handlers.py** – обработчики команд и callback‑кнопок. Управляет состояниями диалога с пользователем.
- **database.py** – функции для работы с базой данных SQLite: сохранение объявлений, получение и обновление данных.
- **comments.py** и **comments_manager.py** – обработка комментариев к объявлениям и пересылка сообщений между тредами.
- **utils.py** – вспомогательные функции: проверка подписки на канал, показ меню, формирование ссылок и уведомления владельцам о комментариях.
- **keyboards.py** – набор готовых клавиатур (reply и inline) для удобства взаимодействия с пользователем.
- **texts.py** – все текстовые сообщения бота.
- **backup_ads.py**, **migrate_db.py**, **run_userbot.py** – утилиты для резервного копирования объявлений, миграции базы и работы с Pyrogram.

## Запуск

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `.env` и укажите в нём необходимые переменные окружения:
   - `BOT_TOKEN` – токен вашего бота.
   - `PRIVATE_CHANNEL_ID` – ID приватного канала для публикации объявлений.
   - `SLONSKI_ID`, `DSHALAYKO_ID` – идентификаторы администраторов.
   - `INVITE_LINK` – ссылка‑приглашение в канал.
   - `API_ID`, `API_HASH` – данные для Pyrogram.
   - `CHAT_NAME`, `CHAT_ID` – имя и ID группы с комментариями.
   - `DB_PATH` – путь к файлу базы данных.
3. Запустите бота:
   ```bash
   python main.py
   ```
